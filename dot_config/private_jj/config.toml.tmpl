"$schema" = "https://jj-vcs.github.io/jj/latest/config-schema.json"

[user]
name = "{{ .name }}"
email = "{{ .email }}"

[ui]
conflict-marker-style = "git"
default-command = "log"
diff-formatter = "difft"

[aliases]
nt = ["new", "trunk()"]
retrunk = ["rebase", "-d", "trunk()"]

[merge-tools.difft]
program = "difft"
diff-args = ["--color=always", "$left", "$right"]

[revset-aliases]
# Redefine immutable_heads() to prevent rewriting others' commits
"immutable_heads()" = "builtin_immutable_heads() | (trunk().. & ~mine())"
# All local branch roots that are not in main(). Rebase these all together
"local_roots()" = "roots(trunk()..(visible_heads() & mine()))"

[templates]
git_push_bookmark = '"{{ .chezmoi.username }}/push-" ++ change_id.short()'
